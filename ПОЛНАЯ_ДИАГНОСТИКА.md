# üî• –ü–û–õ–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê 502 –û–®–ò–ë–ö–ò

## üö® –°–ò–¢–£–ê–¶–ò–Ø
- PM2 –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ
- –°–∞–π—Ç –≤—Å–µ –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502 ‚ùå
- –ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ PM2!

## üîç –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. NGINX –ù–ï –ü–†–û–ö–°–ò–†–£–ï–¢ –ù–ê –ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–¢
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
cat /etc/nginx/sites-available/smilerentalphuket.com
cat /etc/nginx/sites-enabled/smilerentalphuket.com

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Nginx —Å–ª—É—à–∞–µ—Ç
nginx -t
systemctl status nginx
```

### 2. –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –ó–ê–ü–£–©–ï–ù–û –ù–ê –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ú –ü–û–†–¢–£
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
netstat -tlnp | grep :3000
netstat -tlnp | grep node
ps aux | grep node

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2 —Å—Ç–∞—Ç—É—Å –¥–µ—Ç–∞–ª—å–Ω–æ
pm2 show smile-rental
pm2 logs smile-rental --lines 50
```

### 3. FIREWALL –ë–õ–û–ö–ò–†–£–ï–¢ –°–û–ï–î–ò–ù–ï–ù–ò–Ø
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
ufw status
iptables -L

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ –ª–∏ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl -v http://localhost:3000
curl -v http://127.0.0.1:3000
```

### 4. –ü–†–û–ë–õ–ï–ú–´ –° –ü–ê–ú–Ø–¢–¨–Æ/–†–ï–°–£–†–°–ê–ú–ò
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã
free -h
df -h
top -n 1
```

## üîß –≠–ö–°–¢–†–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –ö–æ–º–∞–Ω–¥–∞ 1: –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
ssh root@38.180.122.239 "echo '=== NGINX CONFIG ===' && cat /etc/nginx/sites-available/smilerentalphuket.com && echo '=== NGINX STATUS ===' && systemctl status nginx && echo '=== PORTS ===' && netstat -tlnp | grep :3000 && echo '=== PM2 DETAILED ===' && pm2 show smile-rental && echo '=== LOGS ===' && pm2 logs smile-rental --lines 20 && echo '=== CURL TEST ===' && curl -I http://localhost:3000"
```

### –ö–æ–º–∞–Ω–¥–∞ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
ssh root@38.180.122.239 "systemctl restart nginx && pm2 restart all && systemctl status nginx && pm2 status"
```

### –ö–æ–º–∞–Ω–¥–∞ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
ssh root@38.180.122.239 "netstat -tlnp && ps aux | grep node && lsof -i :3000"
```

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. **–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É 1** - –ø–æ–ª—É—á–∏–º –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
2. **–ï—Å–ª–∏ Nginx –∫–æ–Ω—Ñ–∏–≥ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** - –∏—Å–ø—Ä–∞–≤–∏–º
3. **–ï—Å–ª–∏ –ø–æ—Ä—Ç 3000 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è** - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
4. **–ï—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ** - –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–º –≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è - –≤—ã–ø–æ–ª–Ω–∏ —ç—Ç–æ:
```bash
ssh root@38.180.122.239 "reboot"
```

–ü–æ–¥–æ–∂–¥–∏ 2 –º–∏–Ω—É—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—å —Å–∞–π—Ç. –ò–Ω–æ–≥–¥–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ç—É–ø–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞.

---
**–°–¢–ê–¢–£–°**: –ò—â–µ–º —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É 502 –æ—à–∏–±–∫–∏ (–Ω–µ PM2)
