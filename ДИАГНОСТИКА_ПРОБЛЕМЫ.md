# üîç –ü–û–õ–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê 502 –ü–†–û–ë–õ–ï–ú–´

## üö® –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø
- **–°–∞–π—Ç**: https://smilerentalphuket.com
- **–°—Ç–∞—Ç—É—Å**: 502 Bad Gateway
- **–í—Ä–µ–º—è –ø—Ä–æ–±–ª–µ–º—ã**: –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üîß –ß–¢–û –£–ñ–ï –°–î–ï–õ–ê–ù–û
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –≤ ecosystem.config.js
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω GitHub Actions workflow
3. ‚úÖ –°–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ecosystem.config.js –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
4. ‚úÖ –ó–∞–ø—É—â–µ–Ω –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub
5. ‚ùå –ü–æ–ø—ã—Ç–∫–∏ —Ä—É—á–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É (–ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º)

## üéØ –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ 502 –û–®–ò–ë–ö–ò

### 1. PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã
```bash
pm2 status  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 start ecosystem.config.js  # –ó–∞–ø—É—Å—Ç–∏—Ç—å
```

### 2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–æ–±—Ä–∞–Ω–æ
```bash
npm run build  # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
ls -la .next/  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É
```

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
```bash
netstat -tlnp | grep :3000  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç 3000
```

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
```bash
free -h  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–º—è—Ç—å
df -h    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏—Å–∫
```

### 5. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```bash
nginx -t  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
systemctl status nginx  # –°—Ç–∞—Ç—É—Å Nginx
```

## üöÄ –ü–õ–ê–ù –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ì–û –î–ï–ô–°–¢–í–ò–Ø

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@38.180.122.239
# –ü–∞—Ä–æ–ª—å: 925LudK9Bv
```

### –®–∞–≥ 2: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
cd /var/www/smilerentalphuket.com/site-smile-rental
pwd
ls -la
pm2 status
ps aux | grep node
netstat -tlnp | grep :3000
```

### –®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 delete all
killall node

# –û—á–∏—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
rm -rf .next
npm install
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
pm2 start ecosystem.config.js
pm2 save
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
pm2 status
curl -I http://localhost:3000
curl -I https://smilerentalphuket.com
```

## üî• –≠–ö–°–¢–†–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´ (–û–î–ù–û–ô –°–¢–†–û–ö–û–ô)

```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && pm2 delete all && killall node && rm -rf .next && npm install && npm run build && pm2 start ecosystem.config.js && pm2 status"
```

## üìû –ï–°–õ–ò –ù–ò–ß–ï–ì–û –ù–ï –ü–û–ú–û–ì–ê–ï–¢

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä**: `reboot`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**: `pm2 logs`, `tail -f /var/log/nginx/error.log`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS**: `nslookup smilerentalphuket.com`
4. **–°–≤—è–∑–∞—Ç—å—Å—è —Å —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º**

## ‚è∞ –í–†–ï–ú–ï–ù–ù–´–ï –†–ê–ú–ö–ò
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: 2-3 –º–∏–Ω—É—Ç—ã
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 3-5 –º–∏–Ω—É—Ç
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: 1-2 –º–∏–Ω—É—Ç—ã
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 6-10 –º–∏–Ω—É—Ç
