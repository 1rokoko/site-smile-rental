# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ troubleshooting

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ Smile Rental –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç troubleshooting guide –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Windows (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
monitor-server.bat
```

### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
```bash
# –û–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run troubleshoot:check

# –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
node scripts/server-monitor.js start

# –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –≤—Ä—É—á–Ω—É—é
npm run troubleshoot:add "–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã"

# –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—É—é
npm run troubleshoot:solve "–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã"
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
scripts/
‚îú‚îÄ‚îÄ auto-troubleshoot-updater.js  # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è troubleshooting guide
‚îú‚îÄ‚îÄ server-monitor.js             # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
‚îî‚îÄ‚îÄ README.md                     # –≠—Ç–æ—Ç —Ñ–∞–π–ª

monitor-server.bat                # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è Windows
TROUBLESHOOTING_GUIDE.md          # –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ–º—ã–π guide —Å —Ä–µ—à–µ–Ω–∏—è–º–∏
```

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. TroubleshootingUpdater
**–§–∞–π–ª:** `auto-troubleshoot-updater.js`

**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ –æ—à–∏–±–∫–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ TROUBLESHOOTING_GUIDE.md
- –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:**
- `EADDRINUSE` - –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `Application error` - –û—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- `npm ERR!` - –û—à–∏–±–∫–∏ NPM
- `ENOENT` - –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
- `404` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `permission denied` - –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

### 2. ServerMonitor
**–§–∞–π–ª:** `server-monitor.js`

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ URL'–æ–≤ —Å–∞–π—Ç–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ PM2 –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ troubleshooting guide
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ URL'—ã:**
- `https://smilerentalphuket.com/scooter-rental/`
- `https://smilerentalphuket.com/privacy-policy`
- `https://smilerentalphuket.com/scooter-rental/privacy-policy`

## üìä –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞
- ‚úÖ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ (–æ–∂–∏–¥–∞–µ—Ç—Å—è 200)
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ >5 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –°—Ç–∞—Ç—É—Å PM2 –ø—Ä–æ—Ü–µ—Å—Å–∞ `smile-rental`
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤ (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ >10)
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ troubleshooting guide
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
–í —Ñ–∞–π–ª–µ `server-monitor.js` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

```javascript
this.serverConfig = {
    host: '38.180.122.239',
    user: 'root',
    password: '925LudK9Bv',
    projectPath: '/var/www/smilerentalphuket.com/site-smile-rental'
};

this.checkInterval = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö URL'–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
```javascript
this.siteUrls = [
    'https://smilerentalphuket.com/scooter-rental/',
    'https://smilerentalphuket.com/privacy-policy',
    'https://smilerentalphuket.com/scooter-rental/privacy-policy',
    // –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ URL'—ã –∑–¥–µ—Å—å
];
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
–í —Ñ–∞–π–ª–µ `auto-troubleshoot-updater.js` –≤ –º–µ—Ç–æ–¥–µ `detectProblemType()`:

```javascript
const errorPatterns = {
    '–Ω–æ–≤–∞—è_–æ—à–∏–±–∫–∞': {
        title: '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã',
        category: '–∫–∞—Ç–µ–≥–æ—Ä–∏—è',
        severity: 'critical|medium|low',
        solution: `# –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è
ssh root@38.180.122.239 "–∫–æ–º–∞–Ω–¥–∞"`
    }
};
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤
- `logs/troubleshooting.log` - –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å–∏—Å—Ç–µ–º—ã troubleshooting
- PM2 –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `/root/.pm2/logs/smile-rental-*.log`

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
```
[2025-01-08T12:15:30.123Z] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
[2025-01-08T12:20:15.456Z] –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–µ–ø–ª–æ–µ–º

–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ npm scripts:

```json
{
  "scripts": {
    "deploy:check": "npm run troubleshoot:check && npm run build",
    "postdeploy": "npm run troubleshoot:check"
  }
}
```

## üö® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –¢–∏–ø—ã –ø—Ä–æ–±–ª–µ–º –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

**Critical (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ):**
- –°–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- PM2 –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –û—à–∏–±–∫–∏ EADDRINUSE

**Medium (—Å—Ä–µ–¥–Ω–∏–µ):**
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ —Å–∞–π—Ç–∞
- –ú–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤ PM2
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

**Low (–Ω–∏–∑–∫–∏–µ):**
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å—Å–µ `ServerMonitor`
2. –î–æ–±–∞–≤—å—Ç–µ –≤—ã–∑–æ–≤ –≤ –º–µ—Ç–æ–¥ `performFullCheck()`
3. –û–±–Ω–æ–≤–∏—Ç–µ –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Slack/Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Telegram –±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
```javascript
// –í server-monitor.js
async checkDiskSpace() {
    const result = await this.executeSSHCommand('df -h /');
    // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
}

// –í performFullCheck()
results.diskSpace = await this.checkDiskSpace();
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `logs/troubleshooting.log`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É: `npm run troubleshoot:check`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: `ssh root@38.180.122.239`

---

**–ê–≤—Ç–æ—Ä:** Augment Agent  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-01-08
