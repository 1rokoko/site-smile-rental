# üîç –ê–ù–ê–õ–ò–ó –ü–û–°–¢–û–Ø–ù–ù–´–• 502 –û–®–ò–ë–û–ö

## üò§ –ü–†–û–ë–õ–ï–ú–ê
–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç 502 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## üéØ –û–°–ù–û–í–ù–´–ï –ü–†–ò–ß–ò–ù–´ 502 BAD GATEWAY

### 1. **–ü–†–û–ë–õ–ï–ú–´ –° PM2**
- PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ ecosystem.config.js
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- PM2 –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

### 2. **–ü–†–û–ë–õ–ï–ú–´ –° NODE.JS/NPM**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install` –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)
- –ö–æ–º–∞–Ω–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `next: not found`)
- –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Node.js –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ node_modules

### 3. **–ü–†–û–ë–õ–ï–ú–´ –° –ü–û–†–¢–ê–ú–ò**
- –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤ –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏

### 4. **–ü–†–û–ë–õ–ï–ú–´ –° NGINX**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è proxy_pass
- Nginx –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏

### 5. **–ü–†–û–ë–õ–ï–ú–´ –° –ü–ê–ú–Ø–¢–¨–Æ/–†–ï–°–£–†–°–ê–ú–ò**
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üîß –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

### –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
#!/bin/bash
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ñ–∏–∫—Å 502 –æ—à–∏–±–æ–∫

echo "=== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –°–ï–†–í–ï–†–ê ==="
free -h
df -h
ps aux | grep node | wc -l

echo "=== –û–ß–ò–°–¢–ö–ê –ü–†–û–¶–ï–°–°–û–í ==="
pm2 delete all
pkill -f node
fuser -k 3000/tcp

echo "=== –ü–†–û–í–ï–†–ö–ê –ü–†–û–ï–ö–¢–ê ==="
cd /var/www/smilerentalphuket.com/site-smile-rental
npm install
npm run build

echo "=== –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ==="
pm2 start node_modules/.bin/next --name app -- start -p 3000

echo "=== –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê ==="
pm2 status
curl -I http://localhost:3000
```

## üöÄ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–ò–Ø 502

### 1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è**
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ï–¥–∏–Ω—ã–π ecosystem.config.js –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤**
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏ –∏ –¥–∏—Å–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### 3. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –ø–ª–∞–Ω—ã**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ —Å–±–æ–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### 4. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
- –û–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç = –æ–¥–∏–Ω –ø–æ—Ä—Ç
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üí° –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –≠–ö–°–¢–†–ï–ù–ù–û–ì–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

```bash
# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 delete all && pkill -f node && fuser -k 3000/tcp
cd /var/www/smilerentalphuket.com/site-smile-rental
npm install && npm run build
pm2 start node_modules/.bin/next --name app -- start -p 3000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
pm2 status && curl -I http://localhost:3000
```

---
**–í–´–í–û–î**: 502 –æ—à–∏–±–∫–∏ –æ–±—ã—á–Ω–æ —Å–≤—è–∑–∞–Ω—ã —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—Ç—É. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–ø–ª–æ—è —Ä–µ—à–∏—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º.
