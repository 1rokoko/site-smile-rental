# üö® –≠–ö–°–¢–†–ï–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 502 –û–®–ò–ë–ö–ò

## üò§ –°–ò–¢–£–ê–¶–ò–Ø
- GitHub Actions workflow #45 –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ ‚úÖ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç auto-fix-502.sh —Å–æ–∑–¥–∞–Ω ‚úÖ
- –°–∞–π—Ç –≤—Å–µ –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502 Bad Gateway ‚ùå

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. **auto-fix-502.sh –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è** - —Å–∫—Ä–∏–ø—Ç –µ—Å—Ç—å, –Ω–æ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - —Å–∫—Ä–∏–ø—Ç –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
3. **PM2 –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ Next.js** - –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Ç—è–º–∏
4. **–ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤
5. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã** - npm install –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω

## üîß –≠–ö–°–¢–†–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –†–£–ß–ù–û–ì–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && pwd && ls -la auto-fix-502.sh && pm2 status && ps aux | grep node"
```

### 2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && chmod +x auto-fix-502.sh && ./auto-fix-502.sh"
```

### 3. –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && pm2 delete all && npm install && npm run build && pm2 start node_modules/.bin/next --name smile-rental -- start -p 3000"
```

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä–æ–º** - –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É** - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É 1
3. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å** - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É 2 –∏–ª–∏ 3
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

## üí° –ü–û–ß–ï–ú–£ –≠–¢–û –ü–†–û–ò–°–•–û–î–ò–¢

502 –æ—à–∏–±–∫–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ:
- Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–∞ –ø–æ—Ä—Ç—É 3000
- PM2 –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å Next.js –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üöÄ –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π ecosystem.config.js —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ –ø—É—Ç—è–º–∏:

```javascript
module.exports = {
  apps: [{
    name: 'smile-rental',
    script: '/var/www/smilerentalphuket.com/site-smile-rental/node_modules/.bin/next',
    args: 'start -p 3000',
    cwd: '/var/www/smilerentalphuket.com/site-smile-rental',
    instances: 1,
    exec_mode: 'fork'
  }]
};
```

---
**–°–¢–ê–¢–£–°**: –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Ä—É—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 502 –æ—à–∏–±–∫–∏
