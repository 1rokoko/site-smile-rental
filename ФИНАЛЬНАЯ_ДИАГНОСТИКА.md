# üö® –§–ò–ù–ê–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê 502 –û–®–ò–ë–ö–ò

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û
1. **GitHub Actions –¥–µ–ø–ª–æ–π #44 –£–°–ü–ï–®–ù–û –∑–∞–≤–µ—Ä—à–µ–Ω** ‚úÖ
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω ecosystem.config.js** (—É–±—Ä–∞–Ω –∫–ª–∞—Å—Ç–µ—Ä —Ä–µ–∂–∏–º) ‚úÖ
3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** ‚úÖ
4. **–í—Å–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** ‚úÖ

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê
–°–∞–π—Ç –≤—Å–µ –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502 Bad Gateway –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è.

## üîç –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –ù–ï –ó–ê–ü–£–°–¢–ò–õ–û–°–¨
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2 —Å—Ç–∞—Ç—É—Å
pm2 status
pm2 logs smile-rental --lines 20
```

### 2. NGINX –ù–ï –ú–û–ñ–ï–¢ –ü–û–î–ö–õ–Æ–ß–ò–¢–¨–°–Ø –ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Æ
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–ª—É—à–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000
netstat -tlnp | grep :3000
curl http://localhost:3000
```

### 3. –ü–†–û–ë–õ–ï–ú–´ –° –°–ë–û–†–ö–û–ô
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .next –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
ls -la .next/
cat .next/BUILD_ID
```

## üîß –≠–ö–°–¢–†–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´

### –ö–æ–º–∞–Ω–¥–∞ 1: –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && echo '=== PM2 STATUS ===' && pm2 status && echo '=== PM2 LOGS ===' && pm2 logs smile-rental --lines 10 && echo '=== PORT CHECK ===' && netstat -tlnp | grep :3000 && echo '=== CURL TEST ===' && curl -I http://localhost:3000 && echo '=== BUILD CHECK ===' && ls -la .next/ && echo '=== PACKAGE.JSON ===' && ls -la package.json"
```

### –ö–æ–º–∞–Ω–¥–∞ 2: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && pm2 delete all && killall node && npm run build && pm2 start ecosystem.config.js && pm2 status"
```

### –ö–æ–º–∞–Ω–¥–∞ 3: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
ssh root@38.180.122.239 "cd /var/www/smilerentalphuket.com/site-smile-rental && npm start"
```

## üöÄ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. **–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É 1** - –ø–æ–ª—É—á–∏ –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
2. **–ï—Å–ª–∏ PM2 –Ω–µ –∑–∞–ø—É—â–µ–Ω** - –≤—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É 2
3. **–ï—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ** - –≤—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É 3 –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üí° –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:
```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
ssh root@38.180.122.239 "reboot"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx:
```bash
ssh root@38.180.122.239 "nginx -t && systemctl restart nginx"
```

---
**–°–¢–ê–¢–£–°**: GitHub Actions —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ, –Ω—É–∂–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ PM2 –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
