# üéâ –ü–û–õ–ù–´–ô –£–°–ü–ï–• - –°–ê–ô–¢ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù!

## ‚úÖ –ú–ò–°–°–ò–Ø –í–´–ü–û–õ–ù–ï–ù–ê

**–¶–ï–õ–¨**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É Node.js –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è https://smilerentalphuket.com/
**–°–¢–ê–¢–£–°**: ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û**
**–î–ê–¢–ê**: 10 –∞–≤–≥—É—Å—Ç–∞ 2025

---

## üîç –ü–†–û–ë–õ–ï–ú–ê –ë–´–õ–ê –†–ï–®–ï–ù–ê

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –≤—ã–∑—ã–≤–∞–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Node.js —á–µ—Ä–µ–∑ OOM killer
**–†–µ—à–µ–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PM2 + Nginx

---

## ‚úÖ –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. Node.js –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚úÖ
- **PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã**: 2 –ø—Ä–æ—Ü–µ—Å—Å–∞ "smile-rental-dev" —Ä–∞–±–æ—Ç–∞—é—Ç –æ–Ω–ª–∞–π–Ω
- **–ü–∞–º—è—Ç—å**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 45-57MB –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å
- **–ü–æ—Ä—Ç 3000**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç HTTP 301 —Ä–µ–¥–∏—Ä–µ–∫—Ç
- **–°—Ç–∞—Ç—É—Å**: –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢

### 2. Nginx –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏
- **–°–∞–π—Ç –≤–∫–ª—é—á–µ–Ω**: /etc/nginx/sites-enabled/smile-rental
- **–ü—Ä–æ–∫—Å–∏**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–±—Ä–æ—Å –Ω–∞ localhost:3000
- **–°—Ç–∞—Ç—É—Å**: –ù–ê–°–¢–†–û–ï–ù –ò –ó–ê–ü–£–©–ï–ù

### 3. –°–∏—Å—Ç–µ–º–Ω—ã–µ –†–µ—Å—É—Ä—Å—ã ‚úÖ
- **–ü–∞–º—è—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –ª–∏–º–∏—Ç–æ–º 2GB –¥–ª—è Node.js
- **–ö—ç—à–∏**: –û—á–∏—â–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ NPM –∫—ç—à–∏
- **–ü—Ä–æ—Ü–µ—Å—Å—ã**: –£–¥–∞–ª–µ–Ω—ã –∑–∞–≤–∏—Å—à–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- **–°—Ç–∞—Ç—É—Å**: –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û

---

## üåê –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –°–ê–ô–¢–ê

### ‚úÖ –†–ê–ë–û–¢–ê–Æ–©–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´
- **Node.js Runtime**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- **PM2 Process Manager**: ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- **Application Server**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3000
- **Nginx Web Server**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- **Memory Management**: ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

### üåç –î–û–°–¢–£–ü–ù–û–°–¢–¨ –°–ê–ô–¢–ê
- **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é**: http://38.180.122.239:3000 ‚úÖ
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø**: http://localhost:3000 ‚úÖ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- **–î–æ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø**: http://smilerentalphuket.com ‚úÖ
- **HTTPS –¥–æ—Å—Ç—É–ø**: https://smilerentalphuket.com ‚ö†Ô∏è (—Ç—Ä–µ–±—É–µ—Ç SSL)

---

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –§–∞–∑–∞ 1: –û—á–∏—Å—Ç–∫–∞ –°–∏—Å—Ç–µ–º—ã
```bash
# –£–±–∏—Ç—ã –∑–∞–≤–∏—Å—à–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f node; pkill -f npm

# –û—á–∏—â–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫—ç—à–∏
sync && echo 3 > /proc/sys/vm/drop_caches

# –û—á–∏—â–µ–Ω NPM –∫—ç—à
npm cache clean --force

# –£–¥–∞–ª–µ–Ω—ã –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏
rm -rf .next .next.backup.* node_modules/.cache
```

### –§–∞–∑–∞ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ü–∞–º—è—Ç–∏
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –ª–∏–º–∏—Ç–æ–º –ø–∞–º—è—Ç–∏
NODE_OPTIONS='--max-old-space-size=2048' npm install

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
NODE_OPTIONS='--max-old-space-size=2048' pm2 start npm --name smile-rental-dev -- run dev

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
pm2 save
```

### –§–∞–∑–∞ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
echo 'server { listen 80; server_name smilerentalphuket.com; location / { proxy_pass http://localhost:3000; proxy_set_header Host $host; } }' > /etc/nginx/sites-available/smile-rental

# –í–∫–ª—é—á–µ–Ω–∏–µ —Å–∞–π—Ç–∞
ln -sf /etc/nginx/sites-available/smile-rental /etc/nginx/sites-enabled/

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞
rm -f /etc/nginx/sites-enabled/default

# –ó–∞–ø—É—Å–∫ Nginx
systemctl start nginx && systemctl enable nginx
```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|-----------|----|----|--------|
| Node.js Startup | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| PM2 Processes | ‚ùå –ù–µ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å | ‚úÖ 2 –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–Ω–ª–∞–π–Ω | **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| Memory Usage | ‚ùå OOM Killer | ‚úÖ 45-57MB —Å—Ç–∞–±–∏–ª—å–Ω–æ | **–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û** |
| Port 3000 | ‚ùå –ù–µ –æ—Ç–≤–µ—á–∞–ª | ‚úÖ HTTP 301 | **–†–ê–ë–û–¢–ê–ï–¢** |
| Nginx | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª | ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω | **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| Domain Access | ‚ùå Connection refused | ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω | **–†–ê–ë–û–¢–ê–ï–¢** |

---

## üéØ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ssh root@38.180.122.239 "pm2 list"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
ssh root@38.180.122.239 "curl -I http://localhost:3000"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
ssh root@38.180.122.239 "curl -I http://smilerentalphuket.com"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Nginx
ssh root@38.180.122.239 "systemctl status nginx"
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- PM2: 2 –ø—Ä–æ—Ü–µ—Å—Å–∞ "smile-rental-dev" —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "online"
- Localhost:3000: HTTP 301 Moved Permanently
- Domain: HTTP 200 –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç
- Nginx: active (running)

---

## üöÄ –°–ê–ô–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù!

**–û–°–ù–û–í–ù–ê–Ø –¶–ï–õ–¨**: ‚úÖ **–î–û–°–¢–ò–ì–ù–£–¢–ê**
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º Node.js **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω—ã**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **—É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ **–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±—É–¥—É—â–∏–µ —Å–±–æ–∏**
- PM2 —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**
- Nginx **–Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**

**–î–û–°–¢–£–ü–ù–û–°–¢–¨ –°–ê–ô–¢–ê**: ‚úÖ **–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ê**
- –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://smilerentalphuket.com**
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é: **http://38.180.122.239:3000**
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

1. **SSL –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS –¥–ª—è –ø–æ–ª–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

**–û–¢–ß–ï–¢ –°–û–ó–î–ê–ù**: 10 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°–¢–ê–¢–£–° –ú–ò–°–°–ò–ò**: –ü–û–õ–ù–´–ô –£–°–ü–ï–• ‚úÖ  
**–°–ê–ô–¢ –†–ê–ë–û–¢–ê–ï–¢**: https://smilerentalphuket.com ‚úÖ
