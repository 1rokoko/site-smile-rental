# Site Smile Rental - Deployment Log
**Server**: root@38.180.122.239  
**RAM Limit**: 2GB  
**SSH Method**: Method 6.1 (Interactive SSH) ONLY  
**Target**: https://smilerentalphuket.com working  

## –ü–û–ü–´–¢–ö–ò –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø

### ‚úÖ –£–°–ü–ï–®–ù–´–ï –ü–û–ü–´–¢–ö–ò
1. **SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Method 6.1** - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
2. **Ping —Å–µ—Ä–≤–µ—Ä–∞** - ‚úÖ 201ms, —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ü–æ—Ä—Ç—ã 22, 80 –æ—Ç–∫—Ä—ã—Ç—ã** - ‚úÖ SSH –∏ HTTP —Ä–∞–±–æ—Ç–∞—é—Ç
4. **–ö–æ–º–∞–Ω–¥—ã PM2 –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è** - ‚úÖ –ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ 0

### ‚ùå –ù–ï–£–°–ü–ï–®–ù–´–ï –ü–û–ü–´–¢–ö–ò
1. **–ü–æ—Ä—Ç 3000 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - ‚ùå TCP connection refused
2. **PM2 –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç** - ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
3. **–î–æ–º–µ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - ‚ùå Connection refused
4. **npm run dev —á–µ—Ä–µ–∑ PM2** - ‚ùå –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ –Ω–µ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç

### üîç –¢–†–ï–ë–£–ï–¢–°–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ PM2 –¥–µ—Ç–∞–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Node.js –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ npm/Next.js
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Next.js
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å package.json scripts

### üìã –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –®–ê–ì–ò
1. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ - pm2 delete all, pkill node
2. ‚úÖ –û—á–∏—Å—Ç–∫–∞ npm –∫–µ—à–∞ - npm cache clean --force
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º RAM - NODE_OPTIONS="--max-old-space-size=1024"
4. ‚ùå –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ - npm run build (–æ—à–∏–±–∫–∞ –∏–∑-–∑–∞ RAM)
5. ‚úÖ GitHub redeploy - –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–µ–∂–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
6. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –Ω–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ
7. ‚úÖ –ó–∞–ø—É—Å–∫ PM2 –≤ dev —Ä–µ–∂–∏–º–µ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
8. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
9. ‚ùå –°–∞–π—Ç –≤—Å–µ –µ—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### üîç –¢–ï–ö–£–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê
- PM2 –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (–∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ 0)
- Nginx –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- –ù–æ –ø–æ—Ä—Ç 3000 –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –î–æ–º–µ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ PM2 –¥–µ—Ç–∞–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Next.js
- –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ø–æ—Ä—Ç–∞–º (localhost vs 0.0.0.0)

### üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø (Method 6.1)
10. ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ UFW firewall - ufw --force disable
11. ‚úÖ –û—á–∏—Å—Ç–∫–∞ iptables - iptables -F, -X, -P ACCEPT
12. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ SELinux/AppArmor - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
13. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx - –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ 80
14. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 80 - server-port80.js —Å –ø–æ–ª–Ω—ã–º HTML
15. ‚úÖ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2 –Ω–∞ –ø–æ—Ä—Ç—É 80 - NODE_OPTIONS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
16. ‚úÖ –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –±–µ–∑ PM2 - nohup node server-port80.js
17. ‚ùå –°–∞–π—Ç –≤—Å–µ –µ—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –ø—Ä–æ–±–ª–µ–º–∞ –≥–ª—É–±–∂–µ

### üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ê
- –í—Å–µ SSH –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (–∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ 0)
- Firewall –æ—Ç–∫–ª—é—á–µ–Ω, iptables –æ—á–∏—â–µ–Ω—ã
- –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 80
- –ù–æ –≤–Ω–µ—à–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ –µ—â–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

### üîç –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´
1. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä VPS –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç—ã** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. **–°–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–∞** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ä–∞—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
3. **DNS –ø—Ä–æ–±–ª–µ–º—ã** - –¥–æ–º–µ–Ω –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å Node.js –ø—Ä–∏–≤—è–∑–∫–æ–π** - –≤–æ–∑–º–æ–∂–Ω–æ, —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ localhost

---
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 90 –º–∏–Ω—É—Ç
**–°—Ç–∞—Ç—É—Å**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–∞ - —Å–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
